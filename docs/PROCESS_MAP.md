# ğŸ—ºï¸ CARTE DU PROCESSUS DE GÃ‰NÃ‰RATION D'ARTICLES

## ğŸ“ POINT D'ENTRÃ‰E : Interface Streamlit (app.py)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTHENTIFICATION                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Mot de passe : "Rounded18!"                             â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.authenticated = True                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NAVIGATION SIDEBAR                           â”‚
â”‚  â€¢ CrÃ©er un article                                             â”‚
â”‚  â€¢ Historique                                                   â”‚
â”‚  â€¢ Tokens OpenAI                                                â”‚
â”‚  â€¢ Mots-clÃ©s SEO                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    [CrÃ©er un article]
                              â”‚
                              â–¼
```

## ğŸ”„ Ã‰TAPE 1 : SAISIE DU SUJET (step = 'input')

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INPUT UTILISATEUR                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Sujet de l'article (ex: "IA pour secrÃ©taires mÃ©dicaux") â”‚  â”‚
â”‚  â”‚  [GÃ©nÃ©rer des idÃ©es]                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CHARGEMENT DES DONNÃ‰ES (10%)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. load_target_keywords()                               â”‚  â”‚
â”‚  â”‚     â†’ Charge data/keywords.json                          â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  2. select_target_keywords(topic, all_keywords)          â”‚  â”‚
â”‚  â”‚     â†’ SÃ©lectionne 2-4 mots-clÃ©s pertinents                â”‚  â”‚
â”‚  â”‚     â†’ Utilise OpenAI pour scorer la pertinence           â”‚  â”‚
â”‚  â”‚     â†’ st.session_state.target_keywords = [...]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VÃ‰RIFICATION DOUBLONS (30%)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. load_existing_articles()                             â”‚  â”‚
â”‚  â”‚     â†’ Charge data/articles_existants.json                â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  2. get_existing_blog_topics()                           â”‚  â”‚
â”‚  â”‚     â†’ Scrape callrounded.com/blog                        â”‚  â”‚
â”‚  â”‚     â†’ Extrait les titres existants                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  3. check_topic_exists(topic, existing_topics)           â”‚  â”‚
â”‚  â”‚     â†’ Compare avec OpenAI (similaritÃ© sÃ©mantique)          â”‚  â”‚
â”‚  â”‚     â†’ Affiche warning si doublon dÃ©tectÃ©                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RECHERCHE WEB PERPLEXITY (50%)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  search_web_with_sources(query)                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Query: "Recherche donnÃ©es rÃ©centes, Ã©tudes 2025  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚          sur {topic}, agents vocaux IA..."       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Appel API Perplexity (model: llama-3.1-sonar-large)   â”‚  â”‚
â”‚  â”‚  â†’ Extraction du contenu                                 â”‚  â”‚
â”‚  â”‚  â†’ Extraction des sources (URL, titre, description)      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour:                                                  â”‚  â”‚
â”‚  â”‚  {                                                        â”‚  â”‚
â”‚  â”‚    "content": "Texte extrait...",                        â”‚  â”‚
â”‚  â”‚    "sources": [                                           â”‚  â”‚
â”‚  â”‚      {"url": "...", "title": "...", "description": "..."}â”‚  â”‚
â”‚  â”‚    ]                                                      â”‚  â”‚
â”‚  â”‚  }                                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.web_results = content                â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.web_sources = sources                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GÃ‰NÃ‰RATION DES VARIANTES (70%)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  generate_topic_variants(topic, existing_articles,      â”‚  â”‚
â”‚  â”‚                          target_keywords)                 â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini                                     â”‚  â”‚
â”‚  â”‚  â†’ GÃ©nÃ¨re 3 variantes avec :                               â”‚  â”‚
â”‚  â”‚    â€¢ Titre                                                 â”‚  â”‚
â”‚  â”‚    â€¢ Angle Ã©ditorial                                      â”‚  â”‚
â”‚  â”‚    â€¢ Mini-plan (structure)                                â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: [                                                 â”‚  â”‚
â”‚  â”‚    {                                                       â”‚  â”‚
â”‚  â”‚      "title": "...",                                      â”‚  â”‚
â”‚  â”‚      "angle": "...",                                     â”‚  â”‚
â”‚  â”‚      "outline": ["Point 1", "Point 2", ...]              â”‚  â”‚
â”‚  â”‚    },                                                      â”‚  â”‚
â”‚  â”‚    ... (3 variantes)                                       â”‚  â”‚
â”‚  â”‚  ]                                                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.variants = variants                   â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.step = 'variants'                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    [Affichage des variantes]
                              â”‚
                              â–¼
```

## ğŸ¯ Ã‰TAPE 2 : SÃ‰LECTION VARIANTE (step = 'variants')

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AFFICHAGE DES VARIANTES                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Variante 1 : [Titre] [Angle] [Plan]                  â”‚  â”‚
â”‚  â”‚  â€¢ Variante 2 : [Titre] [Angle] [Plan]                   â”‚  â”‚
â”‚  â”‚  â€¢ Variante 3 : [Titre] [Angle] [Plan]                   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  + Affichage mots-clÃ©s ciblÃ©s                             â”‚  â”‚
â”‚  â”‚  + Affichage sources web trouvÃ©es                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    [Utilisateur sÃ©lectionne une variante]
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SAUVEGARDE VARIANTE SÃ‰LECTIONNÃ‰E                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  st.session_state.chosen_variant = variant                â”‚  â”‚
â”‚  â”‚  st.session_state.step = 'generation'                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
```

## âœï¸ Ã‰TAPE 3 : GÃ‰NÃ‰RATION COMPLÃˆTE (step = 'generation')

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1 : GÃ‰NÃ‰RATION BRUTE                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  generate_article(variant, web_results, target_keywords) â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini (temperature: 0.8)                   â”‚  â”‚
â”‚  â”‚  â†’ Prompt systÃ¨me : Style Rounded                          â”‚  â”‚
â”‚  â”‚  â†’ Prompt utilisateur :                                   â”‚  â”‚
â”‚  â”‚    â€¢ Titre + Angle + Plan                                 â”‚  â”‚
â”‚  â”‚    â€¢ DonnÃ©es web (Perplexity)                             â”‚  â”‚
â”‚  â”‚    â€¢ Mots-clÃ©s ciblÃ©s                                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Article Markdown brut (~1200+ mots)                    â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens (token_tracker.py)                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: raw_article (Markdown)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 2 : RAFFINEMENT DU STYLE                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  apply_style_refinement(raw_article)                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini (temperature: 0.7)                   â”‚  â”‚
â”‚  â”‚  â†’ Analyse contextuelle :                                 â”‚  â”‚
â”‚  â”‚    â€¢ Nombre de mots                                        â”‚  â”‚
â”‚  â”‚    â€¢ Nombre de sections H2                                 â”‚  â”‚
â”‚  â”‚    â€¢ PrÃ©sence de chiffres                                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ AmÃ©liorations appliquÃ©es :                              â”‚  â”‚
â”‚  â”‚    â€¢ VariÃ©tÃ© ponctuation (; : â€” !)                         â”‚  â”‚
â”‚  â”‚    â€¢ Longueur phrases (40% courtes, 40% moyennes, 20%     â”‚  â”‚
â”‚  â”‚      longues)                                              â”‚  â”‚
â”‚  â”‚    â€¢ Transitions entre sections                            â”‚  â”‚
â”‚  â”‚    â€¢ Anecdotes rÃ©alistes (2-4)                             â”‚  â”‚
â”‚  â”‚    â€¢ Valorisation chiffres/statistiques                   â”‚  â”‚
â”‚  â”‚    â€¢ Rythme de lecture optimisÃ©                            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: styled_article (Markdown amÃ©liorÃ©)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3 : SCORING INITIAL                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  score_article_quality(styled_article, topic,            â”‚  â”‚
â”‚  â”‚                        target_keywords, article_title)     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini (temperature: 0.2)                  â”‚  â”‚
â”‚  â”‚  â†’ Calculs automatiques :                                  â”‚  â”‚
â”‚  â”‚    â€¢ Nombre de mots                                        â”‚  â”‚
â”‚  â”‚    â€¢ PrÃ©sence FAQ/CTA                                      â”‚  â”‚
â”‚  â”‚    â€¢ Nombre H2/H3                                         â”‚  â”‚
â”‚  â”‚    â€¢ Occurrences mots-clÃ©s                                 â”‚  â”‚
â”‚  â”‚    â€¢ Longueur moyenne phrases                             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Scoring par dimension :                                  â”‚  â”‚
â”‚  â”‚    â€¢ Contenu (0-20)                                       â”‚  â”‚
â”‚  â”‚    â€¢ LisibilitÃ© (0-20)                                    â”‚  â”‚
â”‚  â”‚    â€¢ SEO (0-30)                                           â”‚  â”‚
â”‚  â”‚    â€¢ Conversion (0-20)                                     â”‚  â”‚
â”‚  â”‚    â€¢ CrÃ©dibilitÃ© (0-10)                                    â”‚  â”‚
â”‚  â”‚    â€¢ Global (0-100) = moyenne pondÃ©rÃ©e                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Rapport Markdown dÃ©taillÃ©                               â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: {                                                 â”‚  â”‚
â”‚  â”‚    "global_score": 75,                                    â”‚  â”‚
â”‚  â”‚    "content_score": 16,                                   â”‚  â”‚
â”‚  â”‚    "readability_score": 17,                               â”‚  â”‚
â”‚  â”‚    "seo_score": 22,                                       â”‚  â”‚
â”‚  â”‚    "conversion_score": 14,                                 â”‚  â”‚
â”‚  â”‚    "credibility_score": 9,                                â”‚  â”‚
â”‚  â”‚    "markdown": "Rapport dÃ©taillÃ©..."                      â”‚  â”‚
â”‚  â”‚  }                                                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.article_scoring_before = scoring      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 4 : RÃ‰GÃ‰NÃ‰RATION ITÃ‰RATIVE (max 3 itÃ©rations)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  BOUCLE : for iteration in range(3):                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  1. regenerate_article_with_scoring(                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       article, scoring_markdown, topic, keywords)      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â†’ OpenAI GPT-4o-mini (temperature: 0.7)            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Prompt systÃ¨me : Instructions strictes           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ FAQ toujours en fin (avant conclusion)          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ Respecter recommandations scoring               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       â€¢ AmÃ©liorer points faibles                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Article amÃ©liorÃ©                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Tracking tokens                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  2. score_article_quality(improved_article, ...)        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Nouveau scoring                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  3. Comparaison scores :                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     if score_after > score_before:                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       âœ… Score amÃ©liorÃ© â†’ BREAK                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     else:                                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚       âš ï¸  Continue itÃ©ration suivante                   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.article_scoring_after = scoring_after  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 5 : OPTIMISATION SEO                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  optimize_seo(improved_article, target_keywords)          â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini (temperature: 0.3)                  â”‚  â”‚
â”‚  â”‚  â†’ Analyse densitÃ© mots-clÃ©s                              â”‚  â”‚
â”‚  â”‚  â†’ Optimisations appliquÃ©es :                             â”‚  â”‚
â”‚  â”‚    â€¢ IntÃ©gration mot-clÃ© principal :                       â”‚  â”‚
â”‚  â”‚      - Dans titre H1                                      â”‚  â”‚
â”‚  â”‚      - Dans 2-3 titres H2                                  â”‚  â”‚
â”‚  â”‚      - Dans 100 premiers mots                             â”‚  â”‚
â”‚  â”‚      - Dans conclusion                                     â”‚  â”‚
â”‚  â”‚    â€¢ DensitÃ© optimale : 1-2% principal, 0.5-1% secondairesâ”‚  â”‚
â”‚  â”‚    â€¢ Mots-clÃ©s LSI (3-5) ajoutÃ©s                          â”‚  â”‚
â”‚  â”‚    â€¢ Conversion Markdown â†’ HTML                            â”‚  â”‚
â”‚  â”‚    â€¢ GÃ©nÃ©ration meta tags :                                â”‚  â”‚
â”‚  â”‚      - metaTitle (50-60 chars, mot-clÃ© au dÃ©but)           â”‚  â”‚
â”‚  â”‚      - metaDescription (155-160 chars, mot-clÃ© + CTA)      â”‚  â”‚
â”‚  â”‚      - ogTitle, ogDescription                              â”‚  â”‚
â”‚  â”‚    â€¢ Slug optimisÃ©                                         â”‚  â”‚
â”‚  â”‚    â€¢ Temps de lecture estimÃ©                               â”‚  â”‚
â”‚  â”‚    â€¢ CatÃ©gorie (actualites-tendances / guides-pratiques)  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: {                                                 â”‚  â”‚
â”‚  â”‚    "title": "Titre optimisÃ© SEO",                         â”‚  â”‚
â”‚  â”‚    "summary": "RÃ©sumÃ© 155-160 chars",                      â”‚  â”‚
â”‚  â”‚    "blog_post": "<h2>...</h2><p>...</p>",                â”‚  â”‚
â”‚  â”‚    "slug": "slug-optimise",                               â”‚  â”‚
â”‚  â”‚    "readTime": "6 min",                                   â”‚  â”‚
â”‚  â”‚    "tag": "actualites-tendances",                         â”‚  â”‚
â”‚  â”‚    "keywords": ["kw1", "kw2", ...],                       â”‚  â”‚
â”‚  â”‚    "focusKeyword": "mot-clÃ© principal",                   â”‚  â”‚
â”‚  â”‚    "metaTitle": "...",                                    â”‚  â”‚
â”‚  â”‚    "metaDescription": "...",                              â”‚  â”‚
â”‚  â”‚    "ogTitle": "...",                                      â”‚  â”‚
â”‚  â”‚    "ogDescription": "...",                                â”‚  â”‚
â”‚  â”‚    "canonicalUrl": "https://...",                         â”‚  â”‚
â”‚  â”‚    "translationGroup": "slug",                            â”‚  â”‚
â”‚  â”‚    "keywordDensity": {...}                                â”‚  â”‚
â”‚  â”‚  }                                                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.final_article = optimized             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 6 : GÃ‰NÃ‰RATION VERSION ANGLAISE                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  generate_english_version(optimized)                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ OpenAI GPT-4o-mini (temperature: 0.7)                   â”‚  â”‚
â”‚  â”‚  â†’ Traduction + adaptation culturelle                      â”‚  â”‚
â”‚  â”‚  â†’ MÃªme structure SEO                                     â”‚  â”‚
â”‚  â”‚  â†’ Slug avec suffixe "-en"                               â”‚  â”‚
â”‚  â”‚  â†’ MÃªme translationGroup                                   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Retour: {                                                 â”‚  â”‚
â”‚  â”‚    "title": "English Title",                              â”‚  â”‚
â”‚  â”‚    "slug": "slug-optimise-en",                            â”‚  â”‚
â”‚  â”‚    "blog_post": "<h2>...</h2>",                          â”‚  â”‚
â”‚  â”‚    ... (mÃªme structure que FR)                            â”‚  â”‚
â”‚  â”‚  }                                                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ st.session_state.english_article = english              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    [Affichage de l'article]
                              â”‚
                              â–¼
```

## ğŸ“Š AFFICHAGE ET VALIDATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INTERFACE DE VALIDATION                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Scoring avant/aprÃ¨s (mÃ©triques + rapports dÃ©taillÃ©s)  â”‚  â”‚
â”‚  â”‚  â€¢ Mots-clÃ©s ciblÃ©s et utilisÃ©s                          â”‚  â”‚
â”‚  â”‚  â€¢ Sources web utilisÃ©es                                  â”‚  â”‚
â”‚  â”‚  â€¢ Ã‰diteur Markdown (FR + EN)                            â”‚  â”‚
â”‚  â”‚  â€¢ Preview en temps rÃ©el                                  â”‚  â”‚
â”‚  â”‚  â€¢ Actions :                                              â”‚  â”‚
â”‚  â”‚    - [Publier sur Sanity]                                â”‚  â”‚
â”‚  â”‚    - [Sauvegarder]                                        â”‚  â”‚
â”‚  â”‚    - [RÃ©gÃ©nÃ©rer]                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    [Utilisateur valide]
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SAUVEGARDE                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  save_article_for_review(article_data, topic,            â”‚  â”‚
â”‚  â”‚                          english_data)                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ CrÃ©e fichier :                                         â”‚  â”‚
â”‚  â”‚    articles/YYYYMMDD_HHMMSS_slug.md                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Format :                                               â”‚  â”‚
â”‚  â”‚    # Titre FR                                              â”‚  â”‚
â”‚  â”‚    **Slug:** slug-fr                                       â”‚  â”‚
â”‚  â”‚    **GÃ©nÃ©rÃ© le:** date                                     â”‚  â”‚
â”‚  â”‚    ## RÃ©sumÃ© SEO                                           â”‚  â”‚
â”‚  â”‚    ...                                                     â”‚  â”‚
â”‚  â”‚    ## Contenu FR                                           â”‚  â”‚
â”‚  â”‚    ...                                                     â”‚  â”‚
â”‚  â”‚    ---                                                     â”‚  â”‚
â”‚  â”‚    # English Title                                         â”‚  â”‚
â”‚  â”‚    **Slug:** slug-fr-en                                   â”‚  â”‚
â”‚  â”‚    ...                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PUBLICATION (optionnelle)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  publish_to_production(article_data, english_data)        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Conversion HTML â†’ Sanity Block Content                 â”‚  â”‚
â”‚  â”‚  â†’ CrÃ©ation documents Sanity (FR + EN)                    â”‚  â”‚
â”‚  â”‚  â†’ RÃ©validation Next.js (si REVALIDATE_URL configurÃ©)      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Tracking tokens                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ TRACKING ET STATISTIQUES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRACKING TOKENS (token_tracker.py)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Chaque appel OpenAI enregistre :                         â”‚  â”‚
â”‚  â”‚  â€¢ Timestamp                                              â”‚  â”‚
â”‚  â”‚  â€¢ OpÃ©ration (generate_variants, generate_article, etc.)  â”‚  â”‚
â”‚  â”‚  â€¢ ModÃ¨le (gpt-4o-mini)                                   â”‚  â”‚
â”‚  â”‚  â€¢ Tokens (prompt, completion, total)                     â”‚  â”‚
â”‚  â”‚  â€¢ Topic / Article title                                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â†’ Sauvegarde : data/token_history.json                   â”‚  â”‚
â”‚  â”‚  â†’ Statistiques disponibles dans "Tokens OpenAI"          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ FONCTIONS CLÃ‰S PAR Ã‰TAPE

### Ã‰tape 1 - Input
- `load_target_keywords()` â†’ Charge `data/keywords.json`
- `select_target_keywords()` â†’ SÃ©lectionne 2-4 mots-clÃ©s pertinents (OpenAI)
- `load_existing_articles()` â†’ Charge `data/articles_existants.json`
- `get_existing_blog_topics()` â†’ Scrape `callrounded.com/blog`
- `check_topic_exists()` â†’ VÃ©rifie doublons (OpenAI)
- `search_web_with_sources()` â†’ Recherche Perplexity API

### Ã‰tape 2 - Variantes
- `generate_topic_variants()` â†’ GÃ©nÃ¨re 3 variantes (OpenAI)

### Ã‰tape 3 - GÃ©nÃ©ration
- `generate_article()` â†’ Article brut (OpenAI)
- `apply_style_refinement()` â†’ Raffinement style (OpenAI)
- `score_article_quality()` â†’ Scoring initial (OpenAI)
- `regenerate_article_with_scoring()` â†’ AmÃ©lioration itÃ©rative (OpenAI, max 3x)
- `optimize_seo()` â†’ Optimisation SEO (OpenAI)
- `generate_english_version()` â†’ Version anglaise (OpenAI)
- `save_article_for_review()` â†’ Sauvegarde fichier `.md`
- `publish_to_production()` â†’ Publication Sanity (optionnel)

## ğŸ“Š RÃ‰SUMÃ‰ DES APPELS API

Pour un article complet :

1. **Perplexity** : 1 appel (recherche web)
2. **OpenAI** : ~8-12 appels
   - 1x `select_target_keywords`
   - 1x `check_topic_exists`
   - 1x `generate_topic_variants`
   - 1x `generate_article`
   - 1x `apply_style_refinement`
   - 1x `score_article_quality` (avant)
   - 1-3x `regenerate_article_with_scoring` (itÃ©rations)
   - 1-3x `score_article_quality` (aprÃ¨s chaque itÃ©ration)
   - 1x `optimize_seo`
   - 1x `generate_english_version`

**Total tokens estimÃ©** : ~15,000-25,000 tokens par article  
**CoÃ»t estimÃ©** : ~$0.0045-0.0075 par article (GPT-4o-mini)

## ğŸ¯ PARAMÃˆTRES TECHNIQUES

### TempÃ©ratures OpenAI
- `select_target_keywords` : 0.7
- `check_topic_exists` : 0.7
- `generate_topic_variants` : 0.8
- `generate_article` : 0.8
- `apply_style_refinement` : 0.7
- `score_article_quality` : 0.2 (cohÃ©rence)
- `regenerate_article_with_scoring` : 0.7
- `optimize_seo` : 0.3 (cohÃ©rence SEO)
- `generate_english_version` : 0.7

### ModÃ¨les utilisÃ©s
- **OpenAI** : `gpt-4o-mini` (tous les appels)
- **Perplexity** : `llama-3.1-sonar-large-128k-online` (recherche web)

### Fichiers de donnÃ©es
- `data/keywords.json` : Liste des mots-clÃ©s SEO
- `data/keywords_metadata.json` : MÃ©tadonnÃ©es (volume, complexitÃ©)
- `data/articles_existants.json` : Base de connaissances articles
- `data/token_history.json` : Historique des tokens OpenAI
- `articles/*.md` : Articles gÃ©nÃ©rÃ©s

## ğŸ”„ FLUX DE DONNÃ‰ES

```
Utilisateur
    â”‚
    â”œâ”€â†’ app.py (Streamlit)
    â”‚      â”‚
    â”‚      â”œâ”€â†’ generate_article.py
    â”‚      â”‚      â”œâ”€â†’ OpenAI API
    â”‚      â”‚      â”œâ”€â†’ Perplexity API
    â”‚      â”‚      â””â”€â†’ Utils (token_tracker, keywords_manager)
    â”‚      â”‚
    â”‚      â””â”€â†’ Session State
    â”‚             â”œâ”€â†’ step
    â”‚             â”œâ”€â†’ topic
    â”‚             â”œâ”€â†’ variants
    â”‚             â”œâ”€â†’ target_keywords
    â”‚             â”œâ”€â†’ web_results
    â”‚             â”œâ”€â†’ web_sources
    â”‚             â”œâ”€â†’ final_article
    â”‚             â”œâ”€â†’ english_article
    â”‚             â””â”€â†’ article_scoring_before/after
    â”‚
    â””â”€â†’ Fichiers
           â”œâ”€â†’ articles/*.md (sauvegarde)
           â””â”€â†’ data/*.json (persistance)
```

## ğŸ“ NOTES IMPORTANTES

1. **ItÃ©rations de scoring** : Le systÃ¨me rÃ©gÃ©nÃ¨re l'article jusqu'Ã  3 fois si le score ne s'amÃ©liore pas, garantissant une qualitÃ© optimale.

2. **FAQ placement** : La FAQ est toujours placÃ©e Ã  la fin de l'article, juste avant la conclusion, jamais au milieu.

3. **Mots-clÃ©s** : Le systÃ¨me sÃ©lectionne automatiquement 2-4 mots-clÃ©s pertinents parmi la liste complÃ¨te, puis les intÃ¨gre naturellement dans l'article.

4. **Sources web** : Les sources Perplexity sont extraites avec leurs mÃ©tadonnÃ©es (URL, titre, description) et affichÃ©es dans l'interface.

5. **Tracking** : Tous les appels OpenAI sont trackÃ©s pour le suivi des coÃ»ts et l'analyse d'utilisation.
